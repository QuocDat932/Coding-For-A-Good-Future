<!DOCTYPE html>
<!--
	ustora by freshdesignweb.com
	Twitter: https://twitter.com/freshdesignweb
	URL: https://www.freshdesignweb.com/ustora/
-->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Index</title>
    
    <!-- Google Fonts -->
    <link th:href='@{http://fonts.googleapis.com/css?family=Titillium+Web:400,200,300,700,600}' rel='stylesheet' type='text/css'>
    <link th:href='@{http://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300}' rel='stylesheet' type='text/css'>
    <link th:href='@{http://fonts.googleapis.com/css?family=Raleway:400,100}' rel='stylesheet' type='text/css'>
    
    <!-- Bootstrap -->
    <link rel="stylesheet" th:href="@{/home/css/bootstrap.min.css}">
    <!-- 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    -->
    <!-- Font Awesome -->
    <link rel="stylesheet" th:href="@{/home/css/font-awesome.min.css}">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" th:href="@{/home/css/owl.carousel.css}">
    <link rel="stylesheet" th:href="@{/home/style.css}">
    <link rel="stylesheet" th:href="@{/home/css/responsive.css}">
	<!-- Angular -->
	<script th:src="@{https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js}"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  	<style>
	.form{
		width: 100%;	
		border: 2px;
	}
	.formleft{
		width: 20%;
		float:left;
	}
	.formright{
		width: 80%;
		float:left;
	}
	</style>
  
  
  </head>
  <body>
    <div class="site-branding-area">
        <div class="container">
            <div class="row" id="custom-logo">
                <div class="col-sm-6">
                    <div class="logo">
                        <h1><a href="./"><img th:src="@{/home/img/logo.png}"></a></h1>
                    </div>
                </div>
             <!--<span th:text="${session.currentUser.username}"></span>
             <span th:text="${session.rolesUser.username}"></span>-->
                <div class="col-sm-6">
                    <div class="shopping-item">
                     <!--   <a href="cart.html">Cart - <span class="cart-amunt">$100</span> <i class="fa fa-shopping-cart"></i> <span class="product-count">5</span></a>
                     -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- -->
    <div class="mainmenu-area">
        <div class="container">
            <div class="row">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div> 
                <div class="navbar-collapse collapse">
                    <ul class="nav navbar-nav">
                        <li class="active"><a th:href="@{/home}">Home</a></li>
                        <li class="dropdown">
                    		<a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> 
                    			<span class="nav-label">Sản phẩm </span><span class="caret"></span>
                    		</a>
                    		<ul class="dropdown-menu">
                				<li><a th:href="@{/sanpham/dien-thoai}">Điện thoại</a></li>
                				<li><a th:href="@{/sanpham/lap-top}">Laptop</a></li>
                    		</ul>
		                </li>
                        <li th:if="${session.currentUser == null}"><a th:href="@{/home/login}">Đăng nhập</a></li>
                        <li th:if="${session.currentUser == null}"><a th:href="@{/registration}">Đăng ký</a></li>
                        <li th:if="${session.currentUser != null}"><a th:href="@{/home/logout}">Thoát</a></li>
                        
                        <li th:if="${session.currentRole != null}">
                        	<a th:href="@{/home/management}">
                        	Quản Lý : <span th:text="${session.currentRole.description}"></span>
                        	</a>
                        </li>
                        <li th:if="${session.currentRole != null && session.currentRole.id == 1 }">
                        <a th:href="@{/home/management}">
                        	Quản Lý Sản Phẩm: <span th:text="${session.currentRole.description}"></span>
                        </a>
                        </li>
                        
                        <!--<li><span th:text="${role.description}"></span></li>
                        -->
                        <li th:if="${session.currentUser != null}" style="margin-left: 720px; font-style: italic"><a>Welcome, 
                        												<span th:text="${session.currentUser.username}"></span>
                        												
                        												</a>
                        </li>
                        
                        
	
                    </ul>
	                
                </div>
            </div>
        </div>
    </div>
    <!-- List San Pham -->
    <div class="container mt-3">
  <h2>Danh Sách Sản Phẩm</h2>
  <br>
  <!---->
  <div class="form" >
  <form th:action="@{'/home/upload?productid='+${Products.id}}"
  		method="POST" th:object="${Products}" enctype="multipart/form-data">
	<div class="formleft">
		<input type="file" name="attach" >
		<img th:src="@{'/home/img/' + ${Products.imgUrl}}" alt="" >
	</div>
	<div class="formright">
		Tên Sản Phẩm : 
			<input  th:field="*{name}">
		Số Lượng	:	 
			<input th:field="*{quantity}" type="number" size="4" class="input-text qty text"
        		   name="quantity" min="1" step="1"
        		   >
       	Giá Bán	:	 
			<input th:field="*{price}" type="number" size="4" class="input-text qty text" 
        		   name="quantity" min="1" step="1"
        		   >
        </br>
        &emsp;&emsp;
        Diễn Giải	:	 
			<input th:field="*{description}" type="text" size="89" class="input-text qty text" 
        		   name="description" 
        		   >
	</div>
	<button type="submit">OK</button>
  </form>
  </div>
	
  <!---->
  <table id="sp" class="table table-bordered">
    <thead>
      <tr >
        <th>Hình Ảnh</th>
        <th>Tên Sản Phẩm</th>
        <th>Số Lượng</th>
        <th>Đơn Giá</th>
        <th> Thao Tác</th>
      </tr>
    </thead>
    <tbody id="myTable">
      <tr th:each="product : ${myshop}">
      
        <td style="width: 30%;">
        <img th:src="@{'/home/img/' + ${product.imgUrl}}" alt="" >
        </td>
        <td th:text="${product.name}"></td>
        <!--<td th:text="${product.value.quantity}"></td>-->
        <td>
        	<input type="number" size="4" class="input-text qty text" th:id="@{quantity}"
        		   th:value="${product.quantity}" name="quantity" min="1" step="1"
        		   >
        </td>
        <td id="price" th:text="${product.price} + VND"></td>
      	<td>													                         <!--...}+ ', 1' + '\')...-->
      	<a th:href="@{'/home/getproduct?productid='+ ${product.id}}">get</a>
      	</td>
      </tr>
    </tbody>
    
  </table>
  
  <p>Not that we start the search in tbody, to prevent filtering the table headers.</p>
</div>

<script>

function addToCart(productId){
		let quantity = parseInt($('#quantity').val());
		alert(productId);
		var apiUrl = '/api/cart/update?product=' + productId + '&quantity='+quantity+'&isUpdate=true';
		$.ajax({
			type: "GET",
			contentType: "application/json",
			url: apiUrl,
			success : function(currentCart){
				alert('Ok!')
			},
			error: function(e){
				alert(e);
			}
			
		});
}
function numberWithDot(x) {
		    return x.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ".");
		}
/*********************/
$(document).ready(function(){
  $("#myInput").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#myTable tr").filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    });
  });
});
</script>
    
  </body>
  
   <!-- End footer bottom area -->
   
    <!-- Latest jQuery form server -->
    <script th:src="@{https://code.jquery.com/jquery.min.js}"></script>
    
    <!-- Bootstrap JS form CDN -->
    <script th:src="@{http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js}"></script>
    <!--
    <link rel="stylesheet" th:href="@{https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css}">
    -->
    <!-- jQuery sticky menu -->
    <script th:src="@{/home/js/owl.carousel.min.js}"></script>
    <script th:src="@{/home/js/jquery.sticky.js}"></script>
    
    <!-- jQuery easing -->
    <script th:src="@{/home/js/jquery.easing.1.3.min.js}"></script>
    
    <!-- Main Script -->
    <script th:src="@{/home/js/main.js}"></script>
    
    <!-- Slider -->
    <script type="text/javascript" th:src="@{/home/js/bxslider.min.js}"></script>
	<script type="text/javascript" th:src="@{/homejs/script.slider.js}"></script>
	
	
</html>

<!--
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
	
	
-->